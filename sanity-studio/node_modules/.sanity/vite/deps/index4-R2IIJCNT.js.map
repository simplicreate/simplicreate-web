{
  "version": 3,
  "sources": ["../../../sanity/src/structure/structureResolvers/PaneResolutionError.ts", "../../../sanity/src/structure/structureResolvers/createPaneResolver.ts", "../../../sanity/src/structure/structureResolvers/memoBind.ts", "../../../sanity/src/structure/structureResolvers/resolveIntent.ts", "../../../sanity/src/structure/utils.ts", "../../../sanity/src/structure/structureResolvers/createResolvedPaneNodeStream.ts", "../../../sanity/src/structure/structureResolvers/useResolvedPanes.ts", "../../../sanity/src/structure/components/structureTool/intentResolver/utils.ts", "../../../sanity/src/structure/components/structureTool/intentResolver/IntentResolver.tsx", "../../../sanity/src/structure/components/structureTool/StructureError.tsx", "../../../sanity/src/structure/components/structureTool/NoDocumentTypesScreen.tsx", "../../../sanity/src/structure/components/structureTool/StructureTitle.tsx", "../../../sanity/src/structure/components/structureTool/StructureTool.tsx", "../../../sanity/src/structure/components/structureTool/StructureToolBoundary.tsx"],
  "sourcesContent": ["import {type RouterPaneSiblingContext} from '../types'\n\nexport interface PaneResolutionErrorOptions {\n  message: string\n  context?: RouterPaneSiblingContext\n  helpId?: string\n  cause?: Error\n}\n\n/**\n * An error thrown during pane resolving. This error is meant to be bubbled up\n * through react and handled in an error boundary. It includes a `cause`\n * property which is the original error caught\n */\nexport class PaneResolutionError extends Error {\n  cause: Error | undefined\n  context: RouterPaneSiblingContext | undefined\n  helpId: string | undefined\n\n  constructor({message, context, helpId, cause}: PaneResolutionErrorOptions) {\n    super(message)\n    this.name = 'PaneResolutionError'\n    this.context = context\n    this.helpId = helpId\n    this.cause = cause\n  }\n}\n", "import {from, isObservable, type Observable, of as observableOf} from 'rxjs'\nimport {publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {isRecord} from 'sanity'\n\nimport {type PaneNode, type RouterPaneSiblingContext, type UnresolvedPaneNode} from '../types'\nimport {PaneResolutionError} from './PaneResolutionError'\n\ninterface Serializable {\n  serialize: (...args: never[]) => unknown\n}\n\nconst isPromise = (thing: any): thing is PromiseLike<unknown> => {\n  return !!thing && typeof thing?.then === 'function'\n}\nconst isSerializable = (thing: unknown): thing is Serializable => {\n  if (!isRecord(thing)) return false\n  return typeof thing.serialize === 'function'\n}\n\n/**\n * The signature of the function used to take an `UnresolvedPaneNode` and turn\n * it into an `Observable<PaneNode>`.\n */\nexport type PaneResolver = (\n  unresolvedPane: UnresolvedPaneNode | undefined,\n  context: RouterPaneSiblingContext,\n  flatIndex: number,\n) => Observable<PaneNode>\n\nexport type PaneResolverMiddleware = (paneResolveFn: PaneResolver) => PaneResolver\n\nconst rethrowWithPaneResolutionErrors: PaneResolverMiddleware =\n  (next) => (unresolvedPane, context, flatIndex) => {\n    try {\n      return next(unresolvedPane, context, flatIndex)\n    } catch (e) {\n      // re-throw errors that are already `PaneResolutionError`s\n      if (e instanceof PaneResolutionError) {\n        throw e\n      }\n\n      // anything else, wrap with `PaneResolutionError` and set the underlying\n      // error as a the `cause`\n      throw new PaneResolutionError({\n        message: typeof e?.message === 'string' ? e.message : '',\n        context,\n        cause: e,\n      })\n    }\n  }\n\nconst wrapWithPublishReplay: PaneResolverMiddleware =\n  (next) =>\n  (...args) => {\n    return next(...args).pipe(\n      // need to add publishReplay + refCount to ensure new subscribers always\n      // get an emission. without this, memoized observables may get stuck\n      // waiting for their first emissions resulting in a loading pane\n      publishReplay(1),\n      refCount(),\n    )\n  }\n\nexport function createPaneResolver(middleware: PaneResolverMiddleware): PaneResolver {\n  // note: this API includes a middleware/wrapper function because the function\n  // is recursive. we want to call the wrapped version of the function always\n  // (even inside of nested calls) so the identifier invoked for the recursion\n  // should be the wrapped version\n  const resolvePane = rethrowWithPaneResolutionErrors(\n    wrapWithPublishReplay(\n      middleware((unresolvedPane, context, flatIndex) => {\n        if (!unresolvedPane) {\n          throw new PaneResolutionError({\n            message: 'Pane returned no child',\n            context,\n            helpId: 'structure-item-returned-no-child',\n          })\n        }\n\n        if (isPromise(unresolvedPane) || isObservable(unresolvedPane)) {\n          return from(unresolvedPane).pipe(\n            switchMap((result) => resolvePane(result, context, flatIndex)),\n          )\n        }\n\n        if (isSerializable(unresolvedPane)) {\n          return resolvePane(unresolvedPane.serialize(context), context, flatIndex)\n        }\n\n        if (typeof unresolvedPane === 'function') {\n          return resolvePane(unresolvedPane(context.id, context), context, flatIndex)\n        }\n\n        return observableOf(unresolvedPane)\n      }),\n    ),\n  )\n\n  return resolvePane\n}\n", "/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n\n// `WeakMap`s require the first type param to extend `object`\nconst bindCache = new WeakMap<object, Map<string, Function>>()\n\n/**\n * An alternative to `obj.method.bind(obj)` that utilizes a weakmap to return\n * the same memory reference for sequent binds.\n */\nexport function memoBind<\n  T extends object,\n  K extends keyof {[P in keyof T]: T[P] extends Function ? T[P] : never},\n>(obj: T, methodKey: K): T[K]\nexport function memoBind(obj: Record<string, unknown>, methodKey: string): Function {\n  const boundMethods = bindCache.get(obj) || new Map<string, Function>()\n  if (boundMethods) {\n    const bound = boundMethods.get(methodKey)\n    if (bound) return bound\n  }\n\n  const method = obj[methodKey]\n\n  if (typeof method !== 'function') {\n    throw new Error(\n      `Expected property \\`${methodKey}\\` to be a function but got ${typeof method} instead.`,\n    )\n  }\n\n  const bound = method.bind(obj)\n  boundMethods.set(methodKey, bound)\n  bindCache.set(obj, boundMethods)\n\n  return bound\n}\n", "import {omit} from 'lodash-es'\nimport {firstValueFrom, type Observable} from 'rxjs'\n\nimport {type StructureContext} from '../structureBuilder'\nimport {\n  type PaneNode,\n  type RouterPanes,\n  type RouterPaneSiblingContext,\n  type UnresolvedPaneNode,\n} from '../types'\nimport {assignId} from './assignId'\nimport {createPaneResolver, type PaneResolverMiddleware} from './createPaneResolver'\nimport {memoBind} from './memoBind'\n\ninterface TraverseOptions {\n  unresolvedPane: UnresolvedPaneNode | undefined\n  intent: string\n  params: {type: string; id: string; [key: string]: string | undefined}\n  payload: unknown\n  parent: PaneNode | null\n  path: string[]\n  currentId: string\n  flatIndex: number\n  levelIndex: number\n  structureContext: StructureContext\n}\n\nexport interface ResolveIntentOptions {\n  rootPaneNode?: UnresolvedPaneNode\n  intent: string\n  params: {type: string; id: string; [key: string]: string | undefined}\n  payload: unknown\n  structureContext: StructureContext\n}\n\n/**\n * Resolves an intent request using breadth first search. If a match is not\n * found, the intent will resolve to the fallback editor.\n *\n * A match is found if:\n * 1. the `PaneNode` is of type `document` and the its ID matches the intent ID\n * 2. the `PaneNode` is of type `documentList` and the `schemaTypeName` matches\n * 3. the `PaneNode`'s `canHandleIntent` method returns true\n *\n * If a `PaneNode` of type `list` is found, it will be searched for a match.\n *\n * @see PaneNode\n */\nexport async function resolveIntent(options: ResolveIntentOptions): Promise<RouterPanes> {\n  const resolvedPaneCache = new Map<string, Observable<PaneNode>>()\n\n  // this is a simple version of the memoizer in `createResolvedPaneNodeStream`\n  const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && `${assignId(unresolvedPane)}-${context.path.join('__')}`\n    const cachedResolvedPane = key && resolvedPaneCache.get(key)\n    if (cachedResolvedPane) return cachedResolvedPane\n\n    const result = nextFn(unresolvedPane, context, flatIndex)\n    if (key) resolvedPaneCache.set(key, result)\n    return result\n  }\n\n  const resolvePane = createPaneResolver(memoize)\n\n  const fallbackEditorPanes: RouterPanes = [\n    [\n      {\n        id: `__edit__${options.params.id}`,\n        params: {...omit(options.params, ['id']), type: options.params.type},\n        payload: options.payload,\n      },\n    ],\n  ]\n\n  async function traverse({\n    currentId,\n    flatIndex,\n    intent,\n    params,\n    parent,\n    path,\n    payload,\n    unresolvedPane,\n    levelIndex,\n    structureContext,\n  }: TraverseOptions): Promise<\n    Array<{panes: RouterPanes; depthIndex: number; levelIndex: number}>\n  > {\n    if (!unresolvedPane) return []\n\n    const {id: targetId, type: schemaTypeName, ...otherParams} = params\n    const context: RouterPaneSiblingContext = {\n      id: currentId,\n      splitIndex: 0,\n      parent,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: undefined,\n      structureContext,\n    }\n    const resolvedPane = await firstValueFrom(resolvePane(unresolvedPane, context, flatIndex))\n\n    // if the resolved pane is a document pane and the pane's ID matches then\n    // resolve the intent to the current path\n    if (resolvedPane.type === 'document' && resolvedPane.id === targetId) {\n      return [\n        {\n          panes: [\n            ...path.slice(0, path.length - 1).map((i) => [{id: i}]),\n            [{id: targetId, params: otherParams, payload}],\n          ],\n          depthIndex: path.length,\n          levelIndex,\n        },\n      ]\n    }\n\n    // NOTE: if you update this logic, please also update the similar handler in\n    // `getIntentState.ts`\n    if (\n      // if the resolve pane's `canHandleIntent` returns true, then resolve\n      resolvedPane.canHandleIntent?.(intent, params, {\n        pane: resolvedPane,\n        index: flatIndex,\n      }) ||\n      // if the pane's `canHandleIntent` did not return true, then match against\n      // this default case. we will resolve the intent if:\n      (resolvedPane.type === 'documentList' &&\n        // 1. the schema type matches (this required for the document to render)\n        resolvedPane.schemaTypeName === schemaTypeName &&\n        // 2. the filter is the default filter.\n        //\n        // NOTE: this case is to prevent false positive matches where the user\n        // has configured a more specific filter for a particular type. In that\n        // case, the user can implement their own `canHandleIntent` function\n        resolvedPane.options.filter === '_type == $type')\n    ) {\n      return [\n        {\n          panes: [\n            // map the current path to router panes\n            ...path.map((id) => [{id}]),\n            // then augment with the intents IDs and params\n            [{id: params.id, params: otherParams, payload}],\n          ],\n          depthIndex: path.length,\n          levelIndex,\n        },\n      ]\n    }\n\n    if (resolvedPane.type === 'list' && resolvedPane.child && resolvedPane.items) {\n      return (\n        await Promise.all(\n          resolvedPane.items.map((item, nextLevelIndex) => {\n            if (item.type === 'divider') return Promise.resolve([])\n\n            return traverse({\n              currentId: item._id || item.id,\n              flatIndex: flatIndex + 1,\n              intent,\n              params,\n              parent: resolvedPane,\n              path: [...path, item.id],\n              payload,\n              unresolvedPane:\n                typeof resolvedPane.child === 'function'\n                  ? memoBind(resolvedPane, 'child')\n                  : resolvedPane.child,\n              levelIndex: nextLevelIndex,\n              structureContext,\n            })\n          }),\n        )\n      ).flat()\n    }\n\n    return []\n  }\n\n  const matchingPanes = await traverse({\n    currentId: 'root',\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext,\n  })\n\n  const closestPaneToRoot = matchingPanes.sort((a, b) => {\n    // break ties with the level index\n    if (a.depthIndex === b.depthIndex) return a.levelIndex - b.levelIndex\n    return a.depthIndex - b.depthIndex\n  })[0]\n\n  if (closestPaneToRoot) {\n    return closestPaneToRoot.panes\n  }\n\n  return fallbackEditorPanes\n}\n", "import {LOADING_PANE} from './constants'\nimport {type DocumentPaneNode, type PaneNode} from './types'\n\nexport function isDocumentPaneNode(pane: PaneNode | typeof LOADING_PANE): pane is DocumentPaneNode {\n  return pane !== LOADING_PANE && pane.type === 'document'\n}\n", "import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {isEqual} from 'lodash-es'\nimport {concat, NEVER, type Observable, of as observableOf} from 'rxjs'\nimport {distinctUntilChanged, map, pairwise, scan, startWith, switchMap} from 'rxjs/operators'\n\nimport {type StructureContext} from '../structureBuilder'\nimport {\n  type DocumentPaneNode,\n  type PaneNode,\n  type PaneNodeResolver,\n  type RouterPanes,\n  type RouterPaneSibling,\n  type RouterPaneSiblingContext,\n  type UnresolvedPaneNode,\n} from '../types'\nimport {assignId} from './assignId'\nimport {\n  createPaneResolver,\n  type PaneResolver,\n  type PaneResolverMiddleware,\n} from './createPaneResolver'\nimport {memoBind} from './memoBind'\nimport {PaneResolutionError} from './PaneResolutionError'\n\n/**\n * the fallback editor child that is implicitly inserted into the structure tree\n * if the id starts with `__edit__`\n */\nconst fallbackEditorChild: PaneNodeResolver = (nodeId, context): DocumentPaneNode => {\n  const id = nodeId.replace(/^__edit__/, '')\n  const {\n    params,\n    payload,\n    structureContext: {resolveDocumentNode},\n  } = context\n  const {type, template} = params\n\n  if (!type) {\n    throw new Error(\n      `Document type for document with ID ${id} was not provided in the router params.`,\n    )\n  }\n\n  let defaultDocumentBuilder = resolveDocumentNode({schemaType: type, documentId: id}).id('editor')\n\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(\n      template,\n      payload as {[key: string]: unknown},\n    )\n  }\n\n  return defaultDocumentBuilder.serialize() as DocumentPaneNode\n}\n\n/**\n * takes in a `RouterPaneSiblingContext` and returns a normalized string\n * representation that can be used for comparisons\n */\nfunction hashContext(context: RouterPaneSiblingContext): string {\n  return `contextHash(${JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: context.serializeOptions?.index,\n    serializeOptionsPath: context.serializeOptions?.path,\n  })})`\n}\n\n/**\n * takes in `ResolvedPaneMeta` and returns a normalized string representation\n * that can be used for comparisons\n */\nconst hashResolvedPaneMeta = (meta: ResolvedPaneMeta): string => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === 'resolvedMeta' ? assignId(meta.paneNode) : null,\n  }\n\n  return `metaHash(${JSON.stringify(normalized)})`\n}\n\n/**\n * Represents one flattened \"router pane\", including the source group and\n * sibling indexes.\n *\n * @see RouterPanes\n */\ninterface FlattenedRouterPane {\n  routerPaneSibling: RouterPaneSibling\n  flatIndex: number\n  groupIndex: number\n  siblingIndex: number\n}\n\n/**\n * The state of the accumulator used to store and manage memo cache state\n */\ninterface CacheState {\n  /**\n   * Holds the memoization results keyed by a combination of `assignId` and a\n   * context hash.\n   */\n  resolvedPaneCache: Map<string, Observable<PaneNode>>\n  /**\n   * Acts as a dictionary that stores cache keys by their flat index. This is\n   * used to clean up the cache between different branches in the pane\n   * structure.\n   *\n   * @see createResolvedPaneNodeStream look inside the `scan` where `wrapFn` is\n   * defined\n   */\n  cacheKeysByFlatIndex: Array<Set<string>>\n  /**\n   * The resulting memoized `PaneResolver` function. This function closes over\n   * the `resolvedPaneCache`.\n   */\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n}\n\nexport interface CreateResolvedPaneNodeStreamOptions {\n  /**\n   * an input stream of `RouterPanes`\n   * @see RouterPanes\n   */\n  routerPanesStream: Observable<RouterPanes>\n  /**\n   * any `UnresolvedPaneNode` (could be an observable, promise, pane resolver etc)\n   */\n  rootPaneNode: UnresolvedPaneNode\n  /** used primarily for testing */\n  initialCacheState?: CacheState\n\n  structureContext: StructureContext\n}\n\n/**\n * The result of pane resolving\n */\nexport type ResolvedPaneMeta = {\n  groupIndex: number\n  siblingIndex: number\n  flatIndex: number\n  routerPaneSibling: RouterPaneSibling\n  path: string[]\n} & ({type: 'loading'; paneNode: null} | {type: 'resolvedMeta'; paneNode: PaneNode})\n\ninterface ResolvePaneTreeOptions {\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n  unresolvedPane: UnresolvedPaneNode | undefined\n  parent: PaneNode | null\n  path: string[]\n  structureContext: StructureContext\n}\n\n/**\n * A recursive pane resolving function. Starts at one unresolved pane node and\n * continues until there is no more flattened router panes that can be used as\n * input to the unresolved panes.\n */\nfunction resolvePaneTree({\n  unresolvedPane,\n  flattenedRouterPanes,\n  parent,\n  path,\n  resolvePane,\n  structureContext,\n}: ResolvePaneTreeOptions): Observable<ResolvedPaneMeta[]> {\n  const [current, ...rest] = flattenedRouterPanes\n  const next = rest[0] as FlattenedRouterPane | undefined\n\n  const context: RouterPaneSiblingContext = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext,\n  }\n\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n      // this switch map receives a resolved pane\n      switchMap((paneNode) => {\n        // we can create a `resolvedMeta` type using it\n        const resolvedPaneMeta: ResolvedPaneMeta = {\n          type: 'resolvedMeta',\n          ...current,\n          paneNode: paneNode,\n          path: context.path,\n        }\n\n        // for the other unresolved panes, we can create \"loading panes\"\n        const loadingPanes = rest.map((i, restIndex) => {\n          const loadingPanePath = [\n            ...context.path,\n            ...rest.slice(restIndex).map((_, currentIndex) => `[${i.flatIndex + currentIndex}]`),\n          ]\n\n          const loadingPane: ResolvedPaneMeta = {\n            type: 'loading',\n            path: loadingPanePath,\n            paneNode: null,\n            ...i,\n          }\n\n          return loadingPane\n        })\n\n        if (!rest.length) {\n          return observableOf([resolvedPaneMeta])\n        }\n\n        let nextStream\n\n        if (\n          // the fallback editor case\n          next?.routerPaneSibling.id.startsWith('__edit__')\n        ) {\n          nextStream = resolvePaneTree({\n            unresolvedPane: fallbackEditorChild,\n            flattenedRouterPanes: rest,\n            parent,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        } else if (current.groupIndex === next?.groupIndex) {\n          // if the next flattened router pane has the same group index as the\n          // current flattened router pane, then the next flattened router pane\n          // belongs to the same group (i.e. it is a split pane)\n          nextStream = resolvePaneTree({\n            unresolvedPane,\n            flattenedRouterPanes: rest,\n            parent,\n            path,\n            resolvePane,\n            structureContext,\n          })\n        } else {\n          // normal children resolving\n          nextStream = resolvePaneTree({\n            unresolvedPane:\n              typeof paneNode.child === 'function'\n                ? (memoBind(paneNode, 'child') as PaneNodeResolver)\n                : paneNode.child,\n            flattenedRouterPanes: rest,\n            parent: paneNode,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        }\n\n        return concat(\n          // we emit the loading panes first in a concat (this emits immediately)\n          observableOf([resolvedPaneMeta, ...loadingPanes]),\n          // then whenever the next stream is done, the results will be combined.\n          nextStream.pipe(map((nextResolvedPanes) => [resolvedPaneMeta, ...nextResolvedPanes])),\n        )\n      }),\n    )\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\n          `Pane resolution error at index ${e.context.index}${\n            e.context.splitIndex > 0 ? ` for split pane index ${e.context.splitIndex}` : ''\n          }: ${e.message}${e.helpId ? ` - see ${generateHelpUrl(e.helpId)}` : ''}`,\n          e,\n        )\n      }\n\n      if (e.helpId === 'structure-item-returned-no-child') {\n        // returning an observable of an empty array will remove loading panes\n        // note: this one intentionally does not throw\n        return observableOf([])\n      }\n    }\n\n    throw e\n  }\n}\n\n/**\n * Takes in a stream of `RouterPanes` and an unresolved root pane and returns\n * a stream of `ResolvedPaneMeta`\n */\nexport function createResolvedPaneNodeStream({\n  routerPanesStream,\n  rootPaneNode,\n  initialCacheState = {\n    cacheKeysByFlatIndex: [],\n    flattenedRouterPanes: [],\n    resolvedPaneCache: new Map(),\n    resolvePane: () => NEVER,\n  },\n  structureContext,\n}: CreateResolvedPaneNodeStreamOptions): Observable<ResolvedPaneMeta[]> {\n  const resolvedPanes$ = routerPanesStream.pipe(\n    // add in implicit \"root\" router pane\n    map((rawRouterPanes) => [[{id: 'root'}], ...rawRouterPanes]),\n    // create flattened router panes\n    map((routerPanes) => {\n      const flattenedRouterPanes: FlattenedRouterPane[] = routerPanes\n        .flatMap((routerPaneGroup, groupIndex) =>\n          routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n            routerPaneSibling,\n            groupIndex,\n            siblingIndex,\n          })),\n        )\n        // add in the flat index\n        .map((i, index) => ({...i, flatIndex: index}))\n\n      return flattenedRouterPanes\n    }),\n    // calculate a \"diffIndex\" used for clearing the memo cache\n    startWith([] as FlattenedRouterPane[]),\n    pairwise(),\n    map(([prev, curr]) => {\n      for (let i = 0; i < curr.length; i++) {\n        const prevValue = prev[i]\n        const currValue = curr[i]\n\n        if (!isEqual(prevValue, currValue)) {\n          return {\n            flattenedRouterPanes: curr,\n            diffIndex: i,\n          }\n        }\n      }\n\n      return {\n        flattenedRouterPanes: curr,\n        diffIndex: curr.length,\n      }\n    }),\n    // create the memoized `resolvePane` function and manage the memo cache\n    scan((acc, next) => {\n      const {cacheKeysByFlatIndex, resolvedPaneCache} = acc\n      const {flattenedRouterPanes, diffIndex} = next\n\n      // use the `cacheKeysByFlatIndex` like a dictionary to find cache keys to\n      // and cache keys to delete\n      const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1)\n      const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1)\n\n      const keysToKeep = new Set(beforeDiffIndex.flatMap((keySet) => Array.from(keySet)))\n      const keysToDelete = afterDiffIndex\n        .flatMap((keySet) => Array.from(keySet))\n        .filter((key) => !keysToKeep.has(key))\n\n      for (const key of keysToDelete) {\n        resolvedPaneCache.delete(key)\n      }\n\n      // create a memoizing pane resolver middleware that utilizes the cache\n      // maintained above. this keeps the cache from growing indefinitely\n      const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n        const key = unresolvedPane && `${assignId(unresolvedPane)}-${hashContext(context)}`\n        const cachedResolvedPane = key && resolvedPaneCache.get(key)\n        if (cachedResolvedPane) return cachedResolvedPane\n\n        const result = nextFn(unresolvedPane, context, flatIndex)\n        if (!key) return result\n\n        const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || new Set()\n        cacheKeySet.add(key)\n        cacheKeysByFlatIndex[flatIndex] = cacheKeySet\n        resolvedPaneCache.set(key, result)\n        return result\n      }\n\n      return {\n        flattenedRouterPanes,\n        cacheKeysByFlatIndex,\n        resolvedPaneCache,\n        resolvePane: createPaneResolver(memoize),\n      }\n    }, initialCacheState),\n    // run the memoized, recursive resolving\n    switchMap(({flattenedRouterPanes, resolvePane}) =>\n      resolvePaneTree({\n        unresolvedPane: rootPaneNode,\n        flattenedRouterPanes,\n        parent: null,\n        path: [],\n        resolvePane,\n        structureContext,\n      }),\n    ),\n  )\n\n  // after we've created a stream of `ResolvedPaneMeta[]`, we need to clean up\n  // the results to remove unwanted loading panes and prevent unnecessary\n  // emissions\n  return resolvedPanes$.pipe(\n    // this diffs the previous emission with the current one. if there is a new\n    // loading pane at the same position where a previous pane already had a\n    // resolved value (looking at the IDs to compare), then return the previous\n    // pane instead of the loading pane\n    scan(\n      (prev, next) =>\n        next.map((nextPane, index) => {\n          const prevPane = prev[index] as ResolvedPaneMeta | undefined\n          if (!prevPane) return nextPane\n          if (nextPane.type !== 'loading') return nextPane\n\n          if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n            return prevPane\n          }\n          return nextPane\n        }),\n      [] as ResolvedPaneMeta[],\n    ),\n    // this prevents duplicate emissions\n    distinctUntilChanged((prev, next) => {\n      if (prev.length !== next.length) return false\n\n      for (let i = 0; i < next.length; i++) {\n        const prevValue = prev[i]\n        const nextValue = next[i]\n        if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n          return false\n        }\n      }\n\n      return true\n    }),\n  )\n}\n", "import {useEffect, useMemo, useState} from 'react'\nimport {ReplaySubject} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {type RouterState, useRouter} from 'sanity/router'\n\nimport {LOADING_PANE} from '../constants'\nimport {type PaneNode, type RouterPaneGroup, type RouterPanes} from '../types'\nimport {useStructureTool} from '../useStructureTool'\nimport {isDocumentPaneNode} from '../utils'\nimport {createResolvedPaneNodeStream} from './createResolvedPaneNodeStream'\n\ninterface PaneData {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  key: string\n  pane: PaneNode | typeof LOADING_PANE\n  params: Record<string, string | undefined> & {perspective?: string}\n  path: string\n  payload: unknown\n  selected: boolean\n  siblingIndex: number\n  maximized: boolean\n}\n\nexport interface Panes {\n  paneDataItems: PaneData[]\n  routerPanes: RouterPanes\n  resolvedPanes: (PaneNode | typeof LOADING_PANE)[]\n  maximizedPane: PaneData | null\n  setMaximizedPane: (pane: PaneData | null) => void\n}\n\nfunction useRouterPanesStream() {\n  const [routerStateSubject] = useState(() => new ReplaySubject<RouterState>(1))\n  const routerPanes$ = useMemo(\n    () =>\n      routerStateSubject\n        .asObservable()\n        .pipe(map((_routerState) => (_routerState?.panes || []) as RouterPanes)),\n    [routerStateSubject],\n  )\n  const {state: routerState} = useRouter()\n  useEffect(() => {\n    routerStateSubject.next(routerState)\n  }, [routerState, routerStateSubject])\n\n  return routerPanes$\n}\ntype ResolvedPanesData = Omit<Panes, 'maximizedPane' | 'setMaximizedPane'>\n\nexport function useResolvedPanes(): Panes {\n  // used to propagate errors from async effect. throwing inside of the render\n  // will bubble the error to react where it can be picked up by standard error\n  // boundaries\n  const [error, setError] = useState<unknown>()\n  const [maximizedPane, setMaximizedPane] = useState<PaneData | null>(null)\n  if (error) throw error\n\n  const {structureContext, rootPaneNode} = useStructureTool()\n  const {navigate} = useRouter()\n\n  const [data, setData] = useState<ResolvedPanesData>({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: [],\n  })\n\n  const routerPanesStream = useRouterPanesStream()\n\n  useEffect(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext,\n    }).pipe(\n      map((resolvedPanes) => {\n        const routerPanes = resolvedPanes.reduce<RouterPanes>((acc, next) => {\n          const currentGroup = acc[next.groupIndex] || []\n          currentGroup[next.siblingIndex] = next.routerPaneSibling\n          acc[next.groupIndex] = currentGroup\n          return acc\n        }, [])\n\n        const groupsLen = routerPanes.length\n\n        const paneDataItems = resolvedPanes.map((pane) => {\n          const {groupIndex, flatIndex, siblingIndex, routerPaneSibling, path} = pane\n          const itemId = routerPaneSibling.id\n          const nextGroup = routerPanes[groupIndex + 1] as RouterPaneGroup | undefined\n\n          const paneDataItem: PaneData = {\n            active: groupIndex === groupsLen - 2,\n            childItemId: nextGroup?.[0].id ?? null,\n            index: flatIndex,\n            itemId: routerPaneSibling.id,\n            groupIndex,\n            key: `${\n              pane.type === 'loading' ? 'unknown' : pane.paneNode.id\n            }-${itemId}-${siblingIndex}`,\n            pane: pane.type === 'loading' ? LOADING_PANE : pane.paneNode,\n            params: routerPaneSibling.params || {},\n            path: path.join(';'),\n            payload: routerPaneSibling.payload,\n            selected: flatIndex === resolvedPanes.length - 1,\n            siblingIndex,\n            maximized: false,\n          }\n\n          return paneDataItem\n        })\n\n        return {\n          paneDataItems,\n          routerPanes,\n          resolvedPanes: paneDataItems.map((pane) => pane.pane),\n        }\n      }),\n    )\n\n    const subscription = resolvedPanes$.subscribe({\n      next: (result) => setData(result),\n      error: (e) => setError(e),\n    })\n\n    return () => subscription.unsubscribe()\n  }, [rootPaneNode, routerPanesStream, structureContext])\n\n  useEffect(\n    function maybeOpenDefaultPanes() {\n      const {paneDataItems, routerPanes} = data\n\n      // Find the last pane that is a document with defaultPanes\n      const lastPaneData = paneDataItems[paneDataItems.length - 1]\n      const lastPane = lastPaneData?.pane\n      if (!lastPane || !isDocumentPaneNode(lastPane)) return\n\n      // Check if defaultPanes is configured\n      if (!lastPane.defaultPanes) return\n\n      const currentGroup = routerPanes[paneDataItems.length - 1]\n      // Only expand if currently single sibling (not already split)\n      if (!currentGroup || currentGroup.length !== 1) return\n\n      const currentParams = currentGroup[0].params\n      if (currentParams?.expanded) return\n\n      // Create expanded group with split panes (similar to duplicateCurrent + setView)\n      const expandedGroup: RouterPaneGroup = lastPane.defaultPanes.map((viewId, index) => ({\n        id: currentGroup[0].id,\n        params: {\n          ...currentParams,\n          view: viewId,\n          // Adds expanded to the first pane in the group to avoid re-expanding the group with every pane change\n          ...(index === 0 ? {expanded: 'true'} : {}),\n        },\n        payload: currentGroup[0].payload,\n      }))\n      // Navigate to expanded state (replace to avoid polluting history)\n      navigate({panes: [...routerPanes.slice(1, -1), expandedGroup]}, {replace: true})\n    },\n    [data, navigate],\n  )\n\n  const paneDataItemsWithMaximized = useMemo(() => {\n    return data.paneDataItems.map((item) => ({\n      ...item,\n      maximized: maximizedPane ? item.key === maximizedPane.key : false,\n    }))\n  }, [data.paneDataItems, maximizedPane])\n\n  return {\n    ...data,\n    paneDataItems: paneDataItemsWithMaximized,\n    maximizedPane,\n    setMaximizedPane,\n  }\n}\n", "import {uuid} from '@sanity/uuid'\nimport {firstValueFrom} from 'rxjs'\nimport {type DocumentStore, getPublishedId} from 'sanity'\n\nimport {PaneResolutionError} from '../../../structureResolvers'\n\nexport function removeDraftPrefix(documentId: string): string {\n  const publishedId = getPublishedId(documentId)\n\n  if (publishedId !== documentId) {\n    console.warn(\n      'Removed unexpected draft id in document link: All links to documents should have the ' +\n        '`drafts.`-prefix removed and something appears to have made an intent link to `%s`',\n      documentId,\n    )\n  }\n\n  return publishedId\n}\n\nexport async function ensureDocumentIdAndType(\n  documentStore: DocumentStore,\n  id: string | undefined,\n  type: string | undefined,\n): Promise<{id: string; type: string}> {\n  if (id && type) return {id, type}\n  if (!id && type) return {id: uuid(), type}\n  if (id && !type) {\n    const resolvedType = await firstValueFrom(documentStore.resolveTypeForDocument(id))\n\n    return {id, type: resolvedType}\n  }\n\n  throw new PaneResolutionError({\n    message: 'Neither document `id` or `type` was provided when trying to resolve intent.',\n  })\n}\n", "import {memo, useCallback, useEffect, useState} from 'react'\nimport {isRecord, useDocumentStore} from 'sanity'\nimport {useRouter, useRouterState} from 'sanity/router'\n\nimport {resolveIntent} from '../../../structureResolvers'\nimport {useStructureTool} from '../../../useStructureTool'\nimport {ensureDocumentIdAndType} from './utils'\n\nconst EMPTY_RECORD: Record<string, unknown> = {}\n\n/**\n * A component that receives an intent from props and redirects to the resolved\n * intent location (while showing a loading spinner during the process)\n */\nexport const IntentResolver = memo(function IntentResolver() {\n  const {navigate} = useRouter()\n  const maybeIntent = useRouterState(\n    useCallback((routerState) => {\n      const intentName = typeof routerState.intent === 'string' ? routerState.intent : undefined\n      return intentName\n        ? {\n            intent: intentName,\n            params: isRecord(routerState.params) ? routerState.params : EMPTY_RECORD,\n            payload: routerState.payload,\n          }\n        : undefined\n    }, []),\n  )\n  const {rootPaneNode, structureContext} = useStructureTool()\n  const documentStore = useDocumentStore()\n  const [error, setError] = useState<unknown>(null)\n\n  // this re-throws errors so that parent ErrorBoundary's can handle them properly\n  if (error) throw error\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (maybeIntent) {\n      const {intent, params, payload} = maybeIntent\n\n      let cancelled = false\n      async function effect() {\n        const {id, type} = await ensureDocumentIdAndType(\n          documentStore,\n          typeof params.id === 'string' ? params.id : undefined,\n          typeof params.type === 'string' ? params.type : undefined,\n        )\n\n        if (cancelled) return\n\n        const panes = await resolveIntent({\n          intent,\n          params: {...params, id, type},\n          payload,\n          rootPaneNode,\n          structureContext,\n        })\n\n        if (cancelled) return\n\n        navigate({panes}, {replace: true})\n      }\n\n      effect().catch(setError)\n\n      return () => {\n        cancelled = true\n      }\n    }\n  }, [documentStore, maybeIntent, navigate, rootPaneNode, structureContext])\n\n  return null\n})\n", "import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {SyncIcon} from '@sanity/icons'\nimport {Box, Card, Code, Container, Heading, Stack, Text} from '@sanity/ui'\nimport {useCallback} from 'react'\nimport {useTranslation} from 'sanity'\nimport {styled} from 'styled-components'\n\nimport {Button} from '../../../ui-components'\nimport {structureLocaleNamespace} from '../../i18n'\nimport {SerializeError} from '../../structureBuilder'\nimport {PaneResolutionError} from '../../structureResolvers'\n\nconst PathSegment = styled.span`\n  &:not(:last-child)::after {\n    content: ' âž ';\n    opacity: 0.5;\n  }\n`\n\nfunction formatStack(stack: string) {\n  return (\n    stack\n      // Prettify builder functions\n      .replace(/\\(\\.\\.\\.\\)\\./g, '(...)\\n  .')\n      // Remove webpack cruft from function names\n      .replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, '')\n      // Remove default export postfix from function names\n      .replace(/___default\\./g, '.')\n      // Replace full host path, leave only path to JS-file\n      .replace(new RegExp(` \\\\(https?:\\\\/\\\\/${window.location.host}`, 'g'), ' (')\n  )\n}\n\ninterface StructureErrorProps {\n  error: unknown\n}\n\nexport function StructureError({error}: StructureErrorProps) {\n  if (!(error instanceof PaneResolutionError)) {\n    throw error\n  }\n  const {cause} = error\n  const {t} = useTranslation(structureLocaleNamespace)\n\n  // Serialize errors are well-formatted and should be readable, in these cases a stack trace is\n  // usually not helpful. Build errors in dev (with HMR) usually also contains a bunch of garbage\n  // instead of an actual error message, so make sure we show the message in these cases as well\n  const stack = cause?.stack || error.stack\n  const showStack =\n    stack && !(cause instanceof SerializeError) && !error.message.includes('Module build failed:')\n\n  const path = cause instanceof SerializeError ? cause.path : []\n  const helpId = (cause instanceof SerializeError && cause.helpId) || error.helpId\n\n  const handleReload = useCallback(() => {\n    window.location.reload()\n  }, [])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" padding={4} sizing=\"border\" tone=\"critical\">\n      <Container>\n        <Heading as=\"h2\">{t('structure-error.header.text')}</Heading>\n\n        <Card marginTop={4} padding={4} radius={2} overflow=\"auto\" shadow={1} tone=\"inherit\">\n          {path.length > 0 && (\n            <Stack space={2}>\n              <Text size={1} weight=\"medium\">\n                {t('structure-error.structure-path.label')}\n              </Text>\n              <Code>\n                {/* TODO: it seems like the path is off by one and includes */}\n                {/* `root` twice  */}\n                {path.slice(1).map((segment, i) => (\n                  <PathSegment key={`${segment}-${i}`}>{segment}</PathSegment>\n                ))}\n              </Code>\n            </Stack>\n          )}\n\n          <Stack marginTop={4} space={2}>\n            <Text size={1} weight=\"medium\">\n              {t('structure-error.error.label')}\n            </Text>\n            <Code>{showStack ? formatStack(stack) : error.message}</Code>\n          </Stack>\n\n          {helpId && (\n            <Box marginTop={4}>\n              <Text>\n                <a href={generateHelpUrl(helpId)} rel=\"noopener noreferrer\" target=\"_blank\">\n                  {t('structure-error.docs-link.text')}\n                </a>\n              </Text>\n            </Box>\n          )}\n\n          <Box marginTop={4}>\n            <Button\n              text={t('structure-error.reload-button.text')}\n              icon={SyncIcon}\n              tone=\"primary\"\n              onClick={handleReload}\n            />\n          </Box>\n        </Card>\n      </Container>\n    </Card>\n  )\n}\n", "import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport {useTranslation} from 'sanity'\n\nimport {structureLocaleNamespace} from '../../i18n'\n\nexport function NoDocumentTypesScreen() {\n  const {t} = useTranslation(structureLocaleNamespace)\n\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"medium\">\n                  {t('no-document-types-screen.title')}\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  {t('no-document-types-screen.subtitle')}\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  <a\n                    href=\"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    {t('no-document-types-screen.link-text')}\n                  </a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n", "import {type ObjectSchemaType} from '@sanity/types'\nimport {useEffect} from 'react'\nimport {useEditState, usePerspective, useSchema, useTranslation, useValuePreview} from 'sanity'\n\nimport {LOADING_PANE} from '../../constants'\nimport {useDocumentLastRev} from '../../hooks/useDocumentLastRev'\nimport {structureLocaleNamespace} from '../../i18n'\nimport {type Panes} from '../../structureResolvers'\nimport {type DocumentPaneNode} from '../../types'\nimport {useStructureTool} from '../../useStructureTool'\n\ninterface StructureTitleProps {\n  resolvedPanes: Panes['resolvedPanes']\n}\n\n// TODO: Fix state jank when editing different versions inside panes.\nconst DocumentTitle = (props: {documentId: string; documentType: string}) => {\n  const {documentId, documentType} = props\n  const {selectedReleaseId} = usePerspective()\n\n  const editState = useEditState(documentId, documentType, 'default', selectedReleaseId)\n  const schema = useSchema()\n  const {t} = useTranslation(structureLocaleNamespace)\n  const isNewDocument = !editState?.published && !editState?.draft\n  const documentValue = editState?.version || editState?.draft || editState?.published\n  const schemaType = schema.get(documentType) as ObjectSchemaType | undefined\n\n  const {value, isLoading: previewValueIsLoading} = useValuePreview({\n    enabled: !!documentValue,\n    schemaType,\n    value: documentValue,\n  })\n\n  const {lastRevisionDocument} = useDocumentLastRev(documentId, documentType)\n  const isDeleted = lastRevisionDocument && !documentValue\n\n  // if the document is deleted, we don't want to show the title\n  const documentTitle = isDeleted\n    ? ''\n    : isNewDocument\n      ? t('browser-document-title.new-document', {\n          schemaType: schemaType?.title || schemaType?.name,\n        })\n      : value?.title || t('browser-document-title.untitled-document')\n\n  const settled = editState.ready && !previewValueIsLoading\n  const newTitle = useConstructDocumentTitle(documentTitle)\n  useEffect(() => {\n    if (!settled) return\n    // Set the title as the document title\n    document.title = newTitle\n  }, [documentTitle, settled, newTitle])\n\n  return null\n}\n\nconst PassthroughTitle = (props: {title?: string}) => {\n  const {title} = props\n  const newTitle = useConstructDocumentTitle(title)\n  useEffect(() => {\n    // Set the title as the document title\n    document.title = newTitle\n  }, [newTitle, title])\n  return null\n}\n\nexport const StructureTitle = (props: StructureTitleProps) => {\n  const {resolvedPanes} = props\n\n  if (!resolvedPanes?.length) return null\n\n  const lastPane = resolvedPanes[resolvedPanes.length - 1]\n\n  // If the last pane is loading, display the structure tool title only\n  if (isLoadingPane(lastPane)) {\n    return <PassthroughTitle />\n  }\n\n  // If the last pane is a document\n  if (isDocumentPane(lastPane)) {\n    // Passthrough the document pane's title, which may be defined in structure builder\n    if (lastPane?.title) {\n      return <PassthroughTitle title={lastPane.title} />\n    }\n\n    // Otherwise, display a `document.title` containing the resolved Sanity document title\n    return <DocumentTitle documentId={lastPane.options.id} documentType={lastPane.options.type} />\n  }\n\n  // Otherwise, display the last pane's title (if present)\n  return <PassthroughTitle title={lastPane?.title} />\n}\n\n/**\n * Construct a pipe delimited title containing `activeTitle` (if applicable) and the base structure title.\n *\n * @param activeTitle - Title of the first segment\n *\n * @returns A pipe delimited title in the format `${activeTitle} | %BASE_STRUCTURE_TITLE%`\n * or simply `%BASE_STRUCTURE_TITLE` if `activeTitle` is undefined.\n */\nfunction useConstructDocumentTitle(activeTitle?: string) {\n  const structureToolBaseTitle = useStructureTool().structureContext.title\n  return [activeTitle, structureToolBaseTitle].filter((title) => title).join(' | ')\n}\n\n// Type guards\nfunction isDocumentPane(pane: Panes['resolvedPanes'][number]): pane is DocumentPaneNode {\n  return pane !== LOADING_PANE && pane.type === 'document'\n}\n\nfunction isLoadingPane(pane: Panes['resolvedPanes'][number]): pane is typeof LOADING_PANE {\n  return pane === LOADING_PANE\n}\n", "import {PortalProvider, useTheme, useToast} from '@sanity/ui'\nimport {isHotkey} from 'is-hotkey-esm'\nimport {Fragment, memo, useCallback, useEffect, useRef, useState} from 'react'\nimport {_isCustomDocumentTypeDefinition, useSchema} from 'sanity'\nimport {useRouter, useRouterState} from 'sanity/router'\nimport {styled} from 'styled-components'\n\nimport {LOADING_PANE} from '../../constants'\nimport {LoadingPane, StructureToolPane} from '../../panes'\nimport {ResolvedPanesProvider, useResolvedPanes} from '../../structureResolvers'\nimport {type PaneNode, type RouterPanes} from '../../types'\nimport {useStructureTool} from '../../useStructureTool'\nimport {PaneLayout} from '../pane'\nimport {NoDocumentTypesScreen} from './NoDocumentTypesScreen'\nimport {StructureTitle} from './StructureTitle'\n\ninterface StructureToolProps {\n  onPaneChange: (panes: Array<PaneNode | typeof LOADING_PANE>) => void\n}\n\nconst StyledPaneLayout = styled(PaneLayout)`\n  min-height: 100%;\n  min-width: 320px;\n`\n\nconst isSaveHotkey = isHotkey('mod+s')\n\n/**\n * @internal\n */\nexport const StructureTool = memo(function StructureTool({onPaneChange}: StructureToolProps) {\n  const {push: pushToast} = useToast()\n  const schema = useSchema()\n  const {navigate} = useRouter()\n  const routerState = useRouterState()\n  const {layoutCollapsed, setLayoutCollapsed} = useStructureTool()\n  const resolvedPanesValue = useResolvedPanes()\n  const {paneDataItems, resolvedPanes, setMaximizedPane, maximizedPane} = resolvedPanesValue\n  // Intent resolving is processed by the sibling `<IntentResolver />` but it doesn't have a UI for indicating progress.\n  // We handle that here, so if there are only 1 pane (the root structure), and there's an intent state in the router, we need to show a placeholder LoadingPane until\n  // the structure is resolved and we know what panes to load/display\n  const isResolvingIntent = useRouterState(\n    useCallback((state) => typeof state.intent === 'string', []),\n  )\n  const {\n    sanity: {media},\n  } = useTheme()\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const handleRootCollapse = useCallback(() => setLayoutCollapsed(true), [setLayoutCollapsed])\n  const handleRootExpand = useCallback(() => setLayoutCollapsed(false), [setLayoutCollapsed])\n\n  /* When a pane is maximised, show only from that pane up to and including itself\n   * - Take the deepest maximised pane.\n   * - Combine with all panes that are deeper than it that are in the same group, or an ancestral group.\n   * - Only show these matching panes.\n   */\n  const maximizedLastIndex = paneDataItems.findLastIndex((pane) => pane.maximized)\n  const paneItemsToShow =\n    maximizedLastIndex === -1\n      ? paneDataItems\n      : paneDataItems\n          .slice(maximizedLastIndex)\n          .filter((pane) => pane.groupIndex <= paneDataItems[maximizedLastIndex].groupIndex)\n\n  useEffect(() => {\n    // we check for length before emitting here to skip the initial empty array\n    // state from the `useResolvedPanes` hook. there should always be a root\n    // pane emitted on subsequent emissions\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes)\n    }\n  }, [onPaneChange, resolvedPanes])\n\n  useEffect(() => {\n    const handleGlobalKeyDown = (event: KeyboardEvent) => {\n      // Prevent `Cmd+S`\n      if (isSaveHotkey(event)) {\n        event.preventDefault()\n\n        pushToast({\n          closable: true,\n          id: 'auto-save-message',\n          status: 'info',\n          title: 'Your work is automatically saved!',\n          duration: 4000,\n        })\n      }\n    }\n\n    window.addEventListener('keydown', handleGlobalKeyDown)\n    return () => window.removeEventListener('keydown', handleGlobalKeyDown)\n  }, [pushToast])\n\n  const hasDefinedDocumentTypes = schema._original?.types.some(_isCustomDocumentTypeDefinition)\n\n  const onSetMaximizedPane = useCallback(\n    (paneData: (typeof paneDataItems)[number] | null) => {\n      if (!paneData) return\n\n      const currentPanes = (routerState?.panes || []) as RouterPanes\n\n      if (paneData.maximized) {\n        setMaximizedPane(null)\n        // Resets all the panes to the current state\n        navigate({\n          panes: currentPanes,\n        })\n        return\n      }\n\n      // Only allow document panes to be maximised\n      if (paneData.pane !== LOADING_PANE && paneData.pane.type === 'document') {\n        // Navigate to this pane, closing all panes after it\n        const slicedPanes = currentPanes.slice(0, paneData.groupIndex)\n        setMaximizedPane(paneData)\n        navigate({\n          panes: slicedPanes,\n        })\n      }\n    },\n    [navigate, routerState?.panes, setMaximizedPane],\n  )\n\n  const previousSelectedIndexRef = useRef(-1)\n\n  useEffect(() => {\n    // find the first pane that has mode=focus as pane params\n    // if found:\n    // - make sure to set it as the maximized pane (documents only)\n    // - then remove the param from the router state\n    //  Ideally we'd persist it in the router somehow so it can survive reloads, but it's currently\n    //  tricky to solve in a good way because maximized pane state should follow user navigation, so\n    //  if you click a button opening another pane, now this new pane should be maximized. The\n    //  natural solve for this is to make mode=focus a sticky query param, and always make the\n    //  \"current active\" pane maximized. However, it doesn't seem like we have a concept of\n    //  \"current active\" pane (there's an \"active\" state on panes, but that's deduced from a set of\n    //  heuristics based things like pane order of appearance, screen width, etc.).\n\n    const focusedPaneAccordingToParams = paneDataItems.find((p) => p.params?.mode === 'focus')\n\n    if (!focusedPaneAccordingToParams) return\n\n    // Only allow document panes to be maximised\n    if (\n      focusedPaneAccordingToParams.pane !== LOADING_PANE &&\n      focusedPaneAccordingToParams.pane.type === 'document'\n    ) {\n      setMaximizedPane(focusedPaneAccordingToParams)\n    }\n\n    const currentPanes = (routerState?.panes || []) as RouterPanes\n\n    const panesWithoutFocus: RouterPanes = currentPanes.map((group) =>\n      group.map((pane) => {\n        const {mode: _omitMode, ...rest} = pane.params || {}\n        const nextParams = Object.keys(rest).length ? rest : undefined\n        return {...pane, params: nextParams}\n      }),\n    )\n\n    navigate({panes: panesWithoutFocus}, {replace: true})\n  }, [navigate, paneDataItems, routerState?.panes, setMaximizedPane])\n\n  // Manage maximised pane: sync with navigation and handle cleanup\n  useEffect(() => {\n    const selectedIndex = paneDataItems.findIndex((pane) => pane.selected)\n    const prevSelectedIndex = previousSelectedIndexRef.current\n    previousSelectedIndexRef.current = selectedIndex\n\n    if (!maximizedPane) return\n\n    // Clear focus if the maximised pane is not a document pane (focus only works with documents)\n    if (maximizedPane.pane !== LOADING_PANE && maximizedPane.pane.type !== 'document') {\n      setMaximizedPane(null)\n      return\n    }\n\n    // When navigating in focus mode, update focus to follow the newly selected pane\n    // This ensures opening a document to the right works correctly even when they were opened previously\n    if (selectedIndex !== -1 && selectedIndex !== prevSelectedIndex) {\n      const selectedPane = paneDataItems[selectedIndex]\n      // Only set focus if the newly selected pane is a document pane\n      setMaximizedPane(selectedPane)\n\n      return\n    }\n\n    // Clean up or find fallback when maximised pane no longer exists\n    const isMaximizedPanePresent = paneDataItems.some((pane) => pane.key === maximizedPane.key)\n\n    if (!isMaximizedPanePresent) {\n      const fallbackPane = paneDataItems.find(\n        (pane) =>\n          pane.groupIndex === maximizedPane.groupIndex &&\n          pane.siblingIndex === maximizedPane.siblingIndex &&\n          pane.pane !== LOADING_PANE &&\n          pane.pane.type === 'document',\n      )\n      setMaximizedPane(fallbackPane || null)\n    }\n  }, [maximizedPane, paneDataItems, setMaximizedPane])\n\n  if (!hasDefinedDocumentTypes) {\n    return <NoDocumentTypesScreen />\n  }\n\n  return (\n    <ResolvedPanesProvider value={resolvedPanesValue}>\n      <PortalProvider element={portalElement || null}>\n        <StyledPaneLayout\n          flex={1}\n          height={layoutCollapsed ? undefined : 'fill'}\n          minWidth={media[1]}\n          onCollapse={handleRootCollapse}\n          onExpand={handleRootExpand}\n        >\n          {paneItemsToShow.map((paneData) => {\n            const {\n              active,\n              childItemId,\n              groupIndex,\n              itemId,\n              key: paneKey,\n              pane,\n              index: paneIndex,\n              params: paneParams,\n              path,\n              payload,\n              siblingIndex,\n              selected,\n              maximized,\n            } = paneData\n            return (\n              <Fragment key={`${pane === LOADING_PANE ? 'loading' : pane.type}-${paneIndex}`}>\n                {pane === LOADING_PANE ? (\n                  <LoadingPane paneKey={paneKey} path={path} selected={selected} />\n                ) : (\n                  <StructureToolPane\n                    active={active}\n                    groupIndex={groupIndex}\n                    index={paneIndex}\n                    pane={pane}\n                    childItemId={childItemId}\n                    itemId={itemId}\n                    paneKey={paneKey}\n                    params={paneParams}\n                    payload={payload}\n                    path={path}\n                    selected={selected}\n                    siblingIndex={siblingIndex}\n                    maximized={maximized}\n                    onSetMaximizedPane={() => onSetMaximizedPane(paneData)}\n                  />\n                )}\n              </Fragment>\n            )\n          })}\n          {/* If there's just 1 pane (the root), or less, and we're resolving an intent then it's necessary to show */}\n          {/* a loading indicator as the intent resolving is async, could take a while and can also be interrupted/redirected */}\n          {paneDataItems.length <= 1 && isResolvingIntent && (\n            <LoadingPane paneKey=\"intent-resolver\" />\n          )}\n        </StyledPaneLayout>\n        <StructureTitle resolvedPanes={resolvedPanes} />\n        <div data-portal=\"\" ref={setPortalElement} />\n      </PortalProvider>\n    </ResolvedPanesProvider>\n  )\n})\n", "import {useEffect, useState} from 'react'\nimport {SourceProvider, type Tool, useWorkspace} from 'sanity'\n\nimport {ErrorBoundary} from '../../../ui-components/errorBoundary'\nimport {setActivePanes} from '../../getIntentState'\nimport {StructureToolProvider} from '../../StructureToolProvider'\nimport {type StructureToolOptions} from '../../types'\nimport {IntentResolver} from './intentResolver'\nimport {StructureError} from './StructureError'\nimport {StructureTool} from './StructureTool'\n\ninterface StructureToolBoundaryProps {\n  tool: Tool<StructureToolOptions>\n}\n\nexport function StructureToolBoundary({tool: {options}}: StructureToolBoundaryProps) {\n  const {unstable_sources: sources} = useWorkspace()\n  const [firstSource] = sources\n  const {source, defaultDocumentNode, structure} = options || {}\n\n  // Set active panes to blank on mount and unmount\n  useEffect(() => {\n    setActivePanes([])\n    return () => setActivePanes([])\n  }, [])\n\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n\n  // this re-throws if the error it catches is not a PaneResolutionError\n  if (error) return <StructureError error={error} />\n\n  return (\n    <ErrorBoundary onCatch={setError}>\n      <SourceProvider name={source || firstSource.name}>\n        <StructureToolProvider defaultDocumentNode={defaultDocumentNode} structure={structure}>\n          <StructureTool onPaneChange={setActivePanes} />\n          <IntentResolver />\n        </StructureToolProvider>\n      </SourceProvider>\n    </ErrorBoundary>\n  )\n}\n"],
  "mappings": "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",
  "names": ["PaneResolutionError", "Error", "constructor", "message", "context", "helpId", "cause", "name", "isPromise", "thing", "then", "isSerializable", "isRecord", "serialize", "rethrowWithPaneResolutionErrors", "next", "unresolvedPane", "flatIndex", "e", "wrapWithPublishReplay", "args", "pipe", "publishReplay", "refCount", "createPaneResolver", "middleware", "resolvePane", "isObservable", "from", "switchMap", "result", "id", "observableOf", "bindCache", "WeakMap", "memoBind", "obj", "methodKey", "boundMethods", "get", "Map", "bound", "method", "bind", "set", "resolveIntent", "options", "resolvedPaneCache", "nextFn", "key", "assignId", "path", "join", "cachedResolvedPane", "fallbackEditorPanes", "params", "omit", "type", "payload", "traverse", "currentId", "intent", "parent", "levelIndex", "structureContext", "targetId", "schemaTypeName", "otherParams", "resolvedPane", "firstValueFrom", "splitIndex", "index", "undefined", "panes", "slice", "length", "map", "i", "depthIndex", "canHandleIntent", "pane", "filter", "child", "items", "Promise", "all", "item", "nextLevelIndex", "resolve", "_id", "flat", "closestPaneToRoot", "rootPaneNode", "sort", "a", "b", "isDocumentPaneNode", "LOADING_PANE", "fallbackEditorChild", "nodeId", "replace", "resolveDocumentNode", "template", "defaultDocumentBuilder", "schemaType", "documentId", "initialValueTemplate", "hashContext", "JSON", "stringify", "parentId", "serializeOptionsIndex", "serializeOptions", "serializeOptionsPath", "hashResolvedPaneMeta", "meta", "normalized", "routerPaneSibling", "groupIndex", "siblingIndex", "paneNode", "resolvePaneTree", "flattenedRouterPanes", "current", "rest", "resolvedPaneMeta", "loadingPanes", "restIndex", "_", "currentIndex", "nextStream", "startsWith", "concat", "nextResolvedPanes", "console", "warn", "generateHelpUrl", "createResolvedPaneNodeStream", "routerPanesStream", "initialCacheState", "cacheKeysByFlatIndex", "NEVER", "rawRouterPanes", "routerPanes", "flatMap", "routerPaneGroup", "startWith", "pairwise", "prev", "curr", "prevValue", "currValue", "isEqual", "diffIndex", "scan", "acc", "beforeDiffIndex", "afterDiffIndex", "keysToKeep", "Set", "keySet", "Array", "keysToDelete", "has", "delete", "cacheKeySet", "add", "nextPane", "prevPane", "distinctUntilChanged", "nextValue", "useRouterPanesStream", "$", "_c", "routerStateSubject", "useState", "_temp", "t0", "asObservable", "_temp2", "routerPanes$", "state", "routerState", "useRouter", "t1", "t2", "useEffect", "_routerState", "ReplaySubject", "useResolvedPanes", "error", "setError", "maximizedPane", "setMaximizedPane", "useStructureTool", "navigate", "for", "paneDataItems", "resolvedPanes", "data", "setData", "subscription", "_temp5", "subscribe", "unsubscribe", "t3", "t4", "paneDataItems_0", "routerPanes_0", "lastPane", "defaultPanes", "currentGroup_0", "currentGroup", "currentParams", "expanded", "expandedGroup", "viewId", "view", "t5", "t6", "maximized", "paneDataItemsWithMaximized", "reduce", "_temp3", "groupsLen", "itemId", "nextGroup", "active", "childItemId", "selected", "_temp4", "pane_0", "ensureDocumentIdAndType", "documentStore", "uuid", "resolvedType", "resolveTypeForDocument", "EMPTY_RECORD", "IntentResolver", "memo", "maybeIntent", "useRouterState", "useDocumentStore", "cancelled", "effect", "catch", "intentName", "PathSegment", "styled", "span", "withConfig", "displayName", "componentId", "formatStack", "stack", "RegExp", "window", "location", "host", "StructureError", "t", "useTranslation", "structureLocaleNamespace", "SerializeError", "includes", "showStack", "T0", "T1", "T2", "handleReload", "t10", "t11", "t12", "t13", "t14", "t7", "t8", "t9", "Card", "Container", "t15", "t16", "t17", "t18", "t19", "t20", "t21", "t22", "SyncIcon", "t23", "t24", "t25", "segment", "reload", "NoDocumentTypesScreen", "Symbol", "DocumentTitle", "props", "documentType", "selectedReleaseId", "usePerspective", "editState", "useEditState", "schema", "useSchema", "isNewDocument", "published", "draft", "documentValue", "version", "value", "isLoading", "previewValueIsLoading", "useValuePreview", "enabled", "lastRevisionDocument", "useDocumentLastRev", "documentTitle", "title", "settled", "ready", "newTitle", "useConstructDocumentTitle", "document", "PassthroughTitle", "StructureTitle", "isLoadingPane", "isDocumentPane", "activeTitle", "structureToolBaseTitle", "StyledPaneLayout", "PaneLayout", "isSaveHotkey", "isHotkey", "StructureTool", "onPaneChange", "push", "pushToast", "useToast", "layoutCollapsed", "setLayoutCollapsed", "resolvedPanesValue", "isResolvingIntent", "sanity", "useTheme", "media", "portalElement", "setPortalElement", "handleRootCollapse", "handleRootExpand", "maximizedLastIndex", "findLastIndex", "paneItemsToShow", "handleGlobalKeyDown", "event", "preventDefault", "closable", "status", "duration", "addEventListener", "removeEventListener", "hasDefinedDocumentTypes", "_original", "types", "some", "_isCustomDocumentTypeDefinition", "paneData", "currentPanes", "slicedPanes", "onSetMaximizedPane", "previousSelectedIndexRef", "useRef", "focusedPaneAccordingToParams", "find", "panesWithoutFocus", "selectedIndex", "findIndex", "_temp6", "prevSelectedIndex", "selectedPane", "pane_3", "fallbackPane", "pane_4", "paneData_0", "paneKey", "pane_5", "paneIndex", "paneParams", "p", "mode", "pane_1", "_omitMode", "nextParams", "Object", "keys", "group", "pane_2", "StructureToolBoundary", "tool", "unstable_sources", "sources", "useWorkspace", "firstSource", "source", "defaultDocumentNode", "structure", "setActivePanes"]
}
