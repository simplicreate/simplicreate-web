{"version":3,"sources":["../../src/actions/types.ts"],"sourcesContent":["import {spinner} from '@sanity/cli-core/ux'\nimport {WorkerChannel} from '@sanity/worker-channels'\n\nimport {TypeGenConfig} from '../readConfig.js'\nimport {type TypegenWorkerChannel as CodegenTypegenWorkerChannel} from '../typescript/typeGenerator.js'\n\n/**\n * Data passed to the typegen worker thread.\n * @internal\n */\nexport interface TypegenGenerateTypesWorkerData {\n  /** Path to the schema JSON file */\n  schemaPath: string\n  /** Glob pattern(s) for finding query files */\n  searchPath: string | string[]\n  /** Working directory (project root) */\n  workDir: string\n\n  /** Whether to generate client method overloads */\n  overloadClientMethods?: boolean\n}\n\n/**\n * Worker channel definition for typegen worker communication.\n * Extends the base TypegenWorkerChannel with additional events for progress tracking.\n * @internal\n */\nexport type TypegenWorkerChannel = WorkerChannel.Definition<\n  CodegenTypegenWorkerChannel['__definition'] & {\n    loadedSchema: WorkerChannel.Event\n    typegenComplete: WorkerChannel.Event<{code: string}>\n    typegenStarted: WorkerChannel.Event<{expectedFileCount: number}>\n  }\n>\n\n/**\n * Options for running a single typegen generation.\n * This is the programmatic API for one-off generation without file watching.\n */\nexport interface RunTypegenOptions {\n  /** Working directory (usually project root) */\n  workDir: string\n\n  /** Typegen configuration */\n  config?: Partial<TypeGenConfig>\n\n  /** Optional spinner instance for progress display */\n  spin?: ReturnType<typeof spinner>\n}\n\n/**\n * Result from a single generation run.\n * @internal\n */\nexport interface GenerationResult {\n  code: string\n  duration: number\n  emptyUnionTypeNodesGenerated: number\n  filesWithErrors: number\n  outputSize: number\n  queriesCount: number\n  queryFilesCount: number\n  schemaTypesCount: number\n  typeNodesGenerated: number\n  unknownTypeNodesGenerated: number\n  unknownTypeNodesRatio: number\n}\n"],"names":[],"mappings":"AAkDA;;;CAGC,GACD,WAYC"}