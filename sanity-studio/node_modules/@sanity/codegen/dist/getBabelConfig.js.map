{"version":3,"sources":["../src/getBabelConfig.ts"],"sourcesContent":["import {existsSync} from 'node:fs'\nimport {dirname, join, resolve} from 'node:path'\nimport {fileURLToPath} from 'node:url'\n\nimport {type TransformOptions} from '@babel/core'\n\nconst __dirname = dirname(fileURLToPath(import.meta.url))\n\n/**\n * Because of bundlers and compilers, knowing the exact path the babel configuration will be\n * located at post - build is not always trivial. We traverse from the current directory upwards\n * until we find the first `babel.config.json` and use that path.\n *\n * @param path - The path to start looking for the babel configuration\n * @returns The path to the `babel.config.json` file\n * @internal\n */\nfunction findBabelConfig(path: string): string {\n  const configPath = join(path, 'babel.config.json')\n  if (existsSync(configPath)) {\n    return configPath\n  }\n\n  const parent = resolve(join(path, '..'))\n  if (parent && parent !== path) {\n    return findBabelConfig(parent)\n  }\n\n  throw new Error('Could not find `babel.config.json` in @sanity/codegen')\n}\n\n/**\n * Get the default babel configuration for `@sanity/codegen`\n *\n * @param path - The path to start looking for the babel configuration. Defaults to `__dirname`\n * @returns A babel configuration object\n * @internal\n */\nexport function getBabelConfig(path?: string): TransformOptions {\n  const configPath = findBabelConfig(path || __dirname)\n  return {extends: configPath}\n}\n"],"names":["existsSync","dirname","join","resolve","fileURLToPath","__dirname","url","findBabelConfig","path","configPath","parent","Error","getBabelConfig","extends"],"mappings":"AAAA,SAAQA,UAAU,QAAO,UAAS;AAClC,SAAQC,OAAO,EAAEC,IAAI,EAAEC,OAAO,QAAO,YAAW;AAChD,SAAQC,aAAa,QAAO,WAAU;AAItC,MAAMC,YAAYJ,QAAQG,cAAc,YAAYE,GAAG;AAEvD;;;;;;;;CAQC,GACD,SAASC,gBAAgBC,IAAY;IACnC,MAAMC,aAAaP,KAAKM,MAAM;IAC9B,IAAIR,WAAWS,aAAa;QAC1B,OAAOA;IACT;IAEA,MAAMC,SAASP,QAAQD,KAAKM,MAAM;IAClC,IAAIE,UAAUA,WAAWF,MAAM;QAC7B,OAAOD,gBAAgBG;IACzB;IAEA,MAAM,IAAIC,MAAM;AAClB;AAEA;;;;;;CAMC,GACD,OAAO,SAASC,eAAeJ,IAAa;IAC1C,MAAMC,aAAaF,gBAAgBC,QAAQH;IAC3C,OAAO;QAACQ,SAASJ;IAAU;AAC7B"}