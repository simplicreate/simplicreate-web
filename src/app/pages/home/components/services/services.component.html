<div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 items-stretch py-12 max-w-5xl mx-auto px-4">
  
  @for (e of services; track e.id) {
    <div (click)="setActive(e.id)"
         [ngClass]="activeEngagementId === e.id ? 
            'border-[#11D6C3] scale-105 z-10 shadow-[0_0_40px_rgba(17,214,195,0.2)] bg-white/[0.04]' : 
            'border-white/10 scale-95 opacity-70 grayscale-[50%]'"
         class="group relative cursor-pointer transition-all duration-500 ease-out border rounded-3xl p-6 md:p-8 bg-[#070B14] flex flex-col h-full"
         role="button"
         [attr.aria-label]="'Select ' + e?.name">

      <div class="min-h-[3.5rem] flex items-start justify-between gap-4">
        <h3 class="text-lg md:text-xl font-bold text-white transition-colors group-hover:text-[#11D6C3]">
          {{ e?.name }}
        </h3>
        <span *ngIf="getEngagementTag(e) as tag"
              class="shrink-0 rounded-full border border-[#11D6C3]/30 bg-[#11D6C3]/10 px-3 py-1 text-[10px] font-black uppercase tracking-wider text-[#11D6C3]">
          {{ tag }}
        </span>
      </div>

      <p class="mt-4 text-sm leading-relaxed text-white/70">
        {{ e?.subtitle }}
      </p>

      <ul class="mt-8 space-y-4 flex-grow">
        @for (bullet of e?.bullets; track bullet) {
          <li class="flex items-start gap-3 text-sm text-white/80">
            <svg class="h-5 w-5 shrink-0 text-[#11D6C3]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <span>{{ bullet }}</span>
          </li>
        }
      </ul>

      <div class="mt-8 pt-6 border-t border-white/5 text-center">
        <span [class.opacity-0]="activeEngagementId !== e.id" 
              class="text-[10px] font-bold uppercase tracking-widest text-[#11D6C3] transition-opacity">
          Selected
        </span>
      </div>
    </div>
  }
</div>